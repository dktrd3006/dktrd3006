-- Config
_G.KeepAmount = {
    -- Event Beanstalk (~120)
    ["Beanstalk"] = 20,
    ["Burning Bud"] = 20,
    ["Ember Lily"] = 20,
    ["Flare Daisy"] = 20,

    -- Farm tiền (~100)
    ["Sugar Apple"] = 30,
    ["Apple"] = 10,
    ["Dragon Fruit"] = 10
}
_G.Treelist = {

}
_G.Remove = true

-- Không cần chỉnh đoạn dưới nếu bạn không biết rõ

local player = game.Players.LocalPlayer

local function getOwnedPlot()
    for _, plot in pairs(workspace.Farm:GetChildren()) do
        local important = plot:FindFirstChild("Important") or plot:FindFirstChild("Importanert")
        if important then
            local data = important:FindFirstChild("Data")
            if data and data:FindFirstChild("Owner") and data.Owner.Value == player.Name then
                return plot
            end
        end
    end
    return nil
end

local function EquipShovel()
    local shovel = player.Backpack:FindFirstChild("Shovel [Destroy Plants]")
    if shovel then
        shovel.Parent = player.Character
    end
end

-- Kiểm tra tên cây có trong danh sách không
local function isInTreelist(treeName)
    for _, name in pairs(_G.Treelist) do
        if string.match(treeName, name) then
            return true
        end
    end
    return false
end

local function DestroyTree()
    local success, err = pcall(function()
        if not _G.Remove then return end
        local plot = getOwnedPlot()
        if not plot then return end
        EquipShovel()

        for _, plant in pairs(plot.Important.Plants_Physical:GetChildren()) do
            if plant:IsA("Model") and not isInTreelist(plant.Name) then
                local part = plant.PrimaryPart or plant:FindFirstChildWhichIsA("BasePart")
                if part then
                    game.ReplicatedStorage.GameEvents.Remove_Item:FireServer(part)
                    task.wait(0.05) -- bật nếu thấy lag
                end
            end
        end
    end)
    if not success then
        warn("Lỗi khi xóa cây: " .. err)
    end
end

while task.wait(3) do
    DestroyTree()
end
